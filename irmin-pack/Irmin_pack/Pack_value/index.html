<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pack_value (irmin-pack.Irmin_pack.Pack_value)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">irmin-pack</a> &#x00BB; <a href="../index.html">Irmin_pack</a> &#x00BB; Pack_value</nav><header class="odoc-preamble"><h1>Module <code><span>Irmin_pack.Pack_value</span></code></h1><p>This module defines abstractions over entries in the pack file, which are encoded as follows:</p><pre>      ┌────────┬────────┬──────────────┬─────────┐
      │  Hash  │  Kind  │  Len(Value)? │  Value  │
      └────────┴────────┴──────────────┴─────────┘
      ┆&lt;┄ H ┄┄&gt;┆&lt;┄ K ┄┄&gt;┆&lt;┄┄┄┄ L? ┄┄┄┄&gt;┆&lt;┄┄ V ┄┄&gt;┆
      ┆&lt;┄┄┄┄┄┄┄┄┄┄┄ entry length, E ┄┄┄┄┄┄┄┄┄┄┄┄&gt;┆</pre><p>The fields are as follows:</p><ul><li><code>Hash</code>: the (fixed-length) hash of the data stored in this entry;</li></ul><ul><li><code>Kind</code>: the <i>kind</i> of data being stored (contents, nodes, commits etc.), encoded as a single &quot;magic&quot; character;</li></ul><ul><li><code>Len(Value)</code>: an optional length header for the <code>Value</code> section of the entry (<i>not</i> including the length of the length header itself), encoded using a variable-length encoding (LEB128). The presence of a length header is determined by the <code>Kind</code> character.</li></ul><ul><li><code>Value</code>: the data itself.</li></ul><p>The length of the overall pack <i>entry</i>, as referenced in the <code>Pack_index</code> or in a direct <code>Pack_key.t</code>, is equal to <code>E = H + K + L + V</code>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Kind"><a href="#module-Kind" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Kind/index.html">Kind</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-weight"><a href="#type-weight" class="anchor"></a><code><span><span class="keyword">type</span> <span class="keyword">nonrec</span> weight</span><span> = </span></code><ol><li id="type-weight.Immediate" class="def variant constructor anchored"><a href="#type-weight.Immediate" class="anchor"></a><code><span>| </span><span><span class="constructor">Immediate</span> <span class="keyword">of</span> int</span></code></li><li id="type-weight.Deferred" class="def variant constructor anchored"><a href="#type-weight.Deferred" class="anchor"></a><code><span>| </span><span><span class="constructor">Deferred</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-kinded"><a href="#type-kinded" class="anchor"></a><code><span><span class="keyword">type</span> <span class="keyword">nonrec</span> kinded</span><span> = </span><span>..</span></code></div><div class="spec-doc"><p><code>kinded</code> is an extenisble variant that each <a href="module-type-S/index.html"><code>S</code></a> extends so that it can define <a href="module-type-S/index.html#val-to_kinded"><code>S.to_kinded</code></a> and <a href="module-type-S/index.html#val-of_kinded"><code>S.of_kinded</code></a>. Its purpose is to allow containers, such as <a href="../../Irmin_pack_unix/Lru/index.html"><code>Irmin_pack_unix.Lru</code></a>, to store and return all types of <a href="module-type-S/index.html"><code>S</code></a> and thus be usable by modules defined over <a href="module-type-S/index.html"><code>S</code></a>, such as <a href="../../Irmin_pack_unix/Pack_store/index.html"><code>Irmin_pack_unix.Pack_store</code></a>.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Config"><a href="#module-type-Config" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Config/index.html">Config</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Of_contents"><a href="#module-Of_contents" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Of_contents/index.html">Of_contents</a></span><span>
  (<a href="Of_contents/argument-1-_/index.html">_</a> : <a href="module-type-Config/index.html">Config</a>)
  (<a href="Of_contents/argument-2-Hash/index.html">Hash</a> : <a href="../../../irmin/Irmin/Hash/module-type-S/index.html">Irmin.Hash.S</a>)
  (<a href="Of_contents/argument-3-Key/index.html">Key</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>)
  (<a href="Of_contents/argument-4-Contents/index.html">Contents</a> : <a href="../../../irmin/Irmin/Contents/module-type-S/index.html">Irmin.Contents.S</a>) : 
  <a href="module-type-S/index.html">S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = <a href="Of_contents/argument-4-Contents/index.html#type-t">Contents.t</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-hash">hash</a> = <a href="Of_contents/argument-2-Hash/index.html#type-t">Hash.t</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-key">key</a> = <a href="Of_contents/argument-3-Key/index.html#type-t">Key.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Of_commit"><a href="#module-Of_commit" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Of_commit/index.html">Of_commit</a></span><span>
  (<a href="Of_commit/argument-1-Hash/index.html">Hash</a> : <a href="../../../irmin/Irmin/Hash/module-type-S/index.html">Irmin.Hash.S</a>)
  (<a href="Of_commit/argument-2-Key/index.html">Key</a> : <a href="../../../irmin/Irmin/Key/module-type-S/index.html">Irmin.Key.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../irmin/Irmin/Key/module-type-S/index.html#type-hash">hash</a> = <a href="Of_commit/argument-1-Hash/index.html#type-t">Hash.t</a></span>)
  (<a href="Of_commit/argument-3-Commit/index.html">Commit</a> : 
    <a href="../../../irmin/Irmin/Commit/Generic_key/module-type-S/index.html">Irmin.Commit.Generic_key.S</a>
      <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../irmin/Irmin/Commit/Generic_key/module-type-S/index.html#type-node_key">node_key</a> = <a href="Of_commit/argument-2-Key/index.html#type-t">Key.t</a></span>
       <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../irmin/Irmin/Commit/Generic_key/module-type-S/index.html#type-commit_key">commit_key</a> = <a href="Of_commit/argument-2-Key/index.html#type-t">Key.t</a></span>) : 
  <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
